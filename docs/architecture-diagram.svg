<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357abd;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#50c878;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3da85a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ee5a52;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad4" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ffa726;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fb8c00;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad5" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ab47bc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e24aa;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">S1 Signal Event Engine (S1-SEE)</text>
  <text x="400" y="55" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#7f8c8d">Multi-Stage Processing Pipeline</text>
  
  <!-- Stage 0: Ingress Spooler -->
  <rect x="50" y="100" width="120" height="80" rx="8" fill="url(#grad1)" stroke="#2c3e50" stroke-width="2"/>
  <text x="110" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Stage 0</text>
  <text x="110" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Ingress</text>
  <text x="110" y="165" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Spooler</text>
  <text x="110" y="195" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">gRPC • Kafka</text>
  <text x="110" y="210" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">AMQP • NATS</text>
  
  <!-- Arrow 0->1 -->
  <path d="M 170 140 L 220 140" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 1: Decoder + Normaliser -->
  <rect x="220" y="100" width="120" height="80" rx="8" fill="url(#grad2)" stroke="#2c3e50" stroke-width="2"/>
  <text x="280" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Stage 1</text>
  <text x="280" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Decoder +</text>
  <text x="280" y="165" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Normaliser</text>
  <text x="280" y="195" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">S1AP PDU</text>
  <text x="280" y="210" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">Parsing</text>
  
  <!-- Arrow 1->2 -->
  <path d="M 340 140 L 390 140" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 2: Correlator -->
  <rect x="390" y="100" width="120" height="80" rx="8" fill="url(#grad3)" stroke="#2c3e50" stroke-width="2"/>
  <text x="450" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Stage 2</text>
  <text x="450" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Correlator</text>
  <text x="450" y="195" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">UE Context</text>
  <text x="450" y="210" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">Management</text>
  
  <!-- Arrow 2->3 -->
  <path d="M 510 140 L 560 140" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 3: Event Engine -->
  <rect x="560" y="100" width="120" height="80" rx="8" fill="url(#grad4)" stroke="#2c3e50" stroke-width="2"/>
  <text x="620" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Stage 3</text>
  <text x="620" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Event Engine</text>
  <text x="620" y="195" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">YAML Rules</text>
  <text x="620" y="210" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">Evaluation</text>
  
  <!-- Arrow 3->5 -->
  <path d="M 680 140 L 730 140" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 5: Sinks -->
  <rect x="630" y="250" width="120" height="80" rx="8" fill="url(#grad5)" stroke="#2c3e50" stroke-width="2"/>
  <text x="690" y="280" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Stage 5</text>
  <text x="690" y="300" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Sinks</text>
  <text x="690" y="340" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">stdout • JSONL</text>
  <text x="690" y="355" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">Kafka • gRPC</text>
  
  <!-- Arrow from Stage 3 to Stage 5 (downward) -->
  <path d="M 620 180 L 620 250" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Spool/WAL Box (below Stage 0) -->
  <rect x="30" y="250" width="160" height="100" rx="8" fill="#ecf0f1" stroke="#34495e" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="110" y="275" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2c3e50">Spool (WAL)</text>
  <text x="110" y="295" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#7f8c8d">System of Record</text>
  <text x="110" y="310" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">• Append-only log</text>
  <text x="110" y="325" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">• Partitioned</text>
  <text x="110" y="340" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">• Replayable</text>
  
  <!-- Arrow from Stage 0 to Spool -->
  <path d="M 110 180 L 110 250" stroke="#34495e" stroke-width="2" fill="none" stroke-dasharray="3,3"/>
  
  <!-- Evidence Chain (connecting stages to spool) -->
  <text x="400" y="400" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#2c3e50">Evidence Chain</text>
  <text x="400" y="420" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#7f8c8d">Every event includes spool offsets for auditability and replay</text>
  
  <!-- Dotted lines from stages to evidence chain concept -->
  <path d="M 280 180 L 280 240 L 400 380" stroke="#95a5a6" stroke-width="1" fill="none" stroke-dasharray="2,2" opacity="0.5"/>
  <path d="M 450 180 L 450 240 L 400 380" stroke="#95a5a6" stroke-width="1" fill="none" stroke-dasharray="2,2" opacity="0.5"/>
  <path d="M 620 180 L 620 240 L 400 380" stroke="#95a5a6" stroke-width="1" fill="none" stroke-dasharray="2,2" opacity="0.5"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e"/>
    </marker>
  </defs>
  
  <!-- Key Features Box -->
  <rect x="220" y="250" width="300" height="100" rx="8" fill="#ffffff" stroke="#bdc3c7" stroke-width="1"/>
  <text x="370" y="275" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2c3e50">Key Features</text>
  <text x="240" y="295" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• No-loss upgradeability</text>
  <text x="240" y="310" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Transport-agnostic core</text>
  <text x="240" y="325" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Declarative YAML rules</text>
  <text x="240" y="340" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Deterministic replay</text>
</svg>

